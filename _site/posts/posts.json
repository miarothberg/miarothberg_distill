[
  {
    "path": "posts/2021-11-04-lendingshiny/",
    "title": "Lending/Loan Predictions Shiny App",
    "description": "My second shiny app, created as part of Assignment 5 in my Advanced Data Science class.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-11-04",
    "categories": [],
    "contents": "\nFor this app, I used the lending_club data available in the modeldata library, which is part of tidymodels to create a ceteris paribus profile for a predictive random forest model I built in Assignment 3. The app allows users to modify all of the predictive variables in the dataset to determine the model’s prediction of the probability that the loan has been paid back fully or is currently on time. Much of the code was borrowed from my professor, Lisa Lendway, but I built some of the input panel and did the themeing for the app.\nThe app is available here: https://miarothberg.shinyapps.io/assignment_05_shiny/. The graph will look something like this:\nCeteris ParabusThe code for this graph is available on my Github here: https://github.com/miarothberg/assignment_05_shiny.\n\n\n\n",
    "preview": "posts/2021-11-04-lendingshiny/shinyimage.png",
    "last_modified": "2021-11-04T20:25:07-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-10-26-tidytuesday5/",
    "title": "Tidy Tuesday 5: Ultramarathons",
    "description": "An analysis of speed, gender, and age in the 2019 P'tiot Sparnatrail in Epernay, France.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-10-26",
    "categories": [],
    "contents": "\n\n\nlibrary(tidyverse)     # for graphing and data cleaning\nlibrary(lubridate)     # for date manipulation\nlibrary(ggthemes)      # for even more plotting themes\nlibrary(sjmisc)\nlibrary(scales)\n\n\n\n\n\nrace <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-10-26/race.csv')\nultra_rankings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-10-26/ultra_rankings.csv')\n\n\n\n\n\nultra_rankings_grand <- ultra_rankings %>% \n  filter(race_year_id == 54013) %>% \n  filter(!is.na(gender)) %>%\n  mutate(time = hms(time)) %>% \n  mutate(time_h = hour(time) + minute(time)/60 + second(time)/360) %>% \n  mutate(kph = 33.3/time_h) %>% \n  group_by(age, gender) %>% \n  summarize(mean_kph = mean(kph))\n\nultra_rankings_grand %>% \n  ggplot(aes(x = age, y = mean_kph, color = gender)) +\n  geom_line() +\n  scale_color_manual(values = c(\"blue\", \"hotpink\")) +\n  theme_minimal() +\n  labs(x = \"\",\n       y = \"Mean Speed (kph)\",\n       title = \"Speed in Relationship to Age and Gender in the 2019 P'tiot Sparnatrail Race\",\n       caption = \"Plot by Mia Rothberg\") +\n  theme(plot.title.position = \"plot\",\n        legend.position = \"none\")\n\n\n\n\n\nThis graph shows the men in the P’tiot Sparnatrail Race peaking at the age of 30, while the women are fastest at the age of 37. The women have a secondary peak at the age of 26 but are not consistently fast between then and 37, while the men are consistently fastest in their 20s. I chose to use stereotypical colors for the two genders in order to eliminate the need for a legend.\n\n\n\n\n",
    "preview": "posts/2021-10-26-tidytuesday5/tidytuesday5_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-11-04T08:25:03-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-10-19-tidytuesday4/",
    "title": "Tidy Tuesday 4: Pumpkins ",
    "description": "Tidy Tuesday from the week of October 19 using pumpkin data.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-10-19",
    "categories": [],
    "contents": "\n\n\nlibrary(tidyverse)     # for graphing and data cleaning\nlibrary(lubridate)     # for date manipulation\nlibrary(ggthemes)      # for even more plotting themes\nlibrary(sjmisc)\nlibrary(scales)\n\n\n\n\n\n# Read in the data for the week\npumpkins <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-10-19/pumpkins.csv')\n\npumpkins <- pumpkins %>% \n  separate(id, into = c(\"year\", \"class\"), convert = TRUE) %>% \n  mutate(place = as.numeric(place)) %>% \n  mutate(grower_name = ifelse(grower_name == \"Ellenbecker, Todd & Seqnoia\", \"Ellenbecker, Todd & Sequoia\", grower_name))\n\n\n\n\n\npumpkins_50 <- pumpkins %>% \n  filter(place <= 50) %>% \n  group_by(grower_name, country) %>% \n  summarize(number = n()) %>% \n  arrange(desc(number)) %>% \n  head(10)\n\n\n\n\n\npumpkins_50 %>% \n  ggplot(aes(y = grower_name, x = number, fill = country)) +\n  geom_col() +\n  scale_fill_manual(values = c(\"red\", \"blue\")) +\n  theme_minimal() +\n  theme(legend.title = element_blank(), \n        panel.grid.major.y = element_blank(), # remove the vertical grid lines\n        panel.grid.minor.y = element_blank(),\n        panel.grid.major.x = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        plot.title.position = \"plot\") +\n  scale_x_continuous(expand = c(0,0)) +\n  labs(x = \"\",\n       y = \"\",\n       title = \"Growers with Most Pumpkins Ranked in the Top 50, 2013 to 2021, by Country\")\n\n\n\n\n\nFor this Tidy Tuesday, I analyzed the top growers of the pumpkins data. I removed both vertical and horizontal grid lines because they seemed extraneous for this graph. It wasn’t surprising that only two countries were represented in these top 10 growers, but there were many other countries represented in the broader dataset.\n\n\n\n\n",
    "preview": "posts/2021-10-19-tidytuesday4/tidytuesday4_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-10-19T13:45:29-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-10-13-eddyfluxshiny/",
    "title": "Eddyflux Shiny App",
    "description": "My first Shiny App, created to showcase Harvard Forest data analyzed in my Big Data in Ecology class.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-10-13",
    "categories": [],
    "contents": "\nI created my first Shiny App to help me with work for two classes: Advanced Data Science and Big Data in Ecology. The data used is from an eddy flux tower in Harvard Forest, a major field site in the world of ecology. It has data on Net Ecoystem Exchange (NEE), Gross Ecosystem Exchange (GEE), respiration, radiation, and temperature at 27 m high (among many others) with measurements taken every 15 minutes starting in 1991.\nThis app showcases my use of user interaction, variable selection, and bootstrap themeing, and is available at https://miarothberg.shinyapps.io/assignment_04_10142021_shiny/. When the page loads, the app looks like this:\nEddyflux\n\n\n",
    "preview": {},
    "last_modified": "2021-11-06T13:31:38-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-10-05-tidytuesday3/",
    "title": "Tidy Tuesday 3: Registered Nurses",
    "description": "Tidy Tuesday from the week of October 5 using data on registered nurses and the ggmap package.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-10-05",
    "categories": [],
    "contents": "\n\n\nlibrary(tidyverse)     # for graphing and data cleaning\nlibrary(ggthemes)      # for even more plotting themes\nlibrary(scales)\nlibrary(plotly)\nlibrary(ggmap)\nlibrary(tmaptools)\nlibrary(maps)\n\n\n\n\n\n# Read in the data for the week\nnurses <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-10-05/nurses.csv')\n\npopulation <- read.csv(\"tidy-tues-nst-est2020.csv\")\n\n\n\n\n\npopulation <- population %>%\n  filter(STATE > 0) %>% \n  filter(STATE < 57) %>% \n  select(NAME, POPESTIMATE2010, POPESTIMATE2020)\n\n\n\n\n\nnurses_joined <- nurses %>% \n  left_join(population, by = c(\"State\" = \"NAME\"))\n\n\n\n\n\nnurses_2019_2020 <- nurses_joined %>% \n  filter(Year == 2010 | Year == 2020) %>% \n  mutate(std_registered_per_1000 = ifelse(Year == 2010, `Total Employed RN`/POPESTIMATE2010 * 1000, `Total Employed RN`/POPESTIMATE2020 * 1000)) %>% \n  mutate(`Registered Nurses per 1000 People` = std_registered_per_1000) %>% \n  mutate(state_lower = tolower(State))\n\n\n\n\n\nstates_map <- map_data(\"state\")\n\nnurses_map <- nurses_2019_2020 %>% \n  filter(Year == 2020) %>% \n  ggplot(aes(fill = std_registered_per_1000, label = State, label2 = `Registered Nurses per 1000 People`, label3 = `Annual Salary Median`)) +\n  geom_map(aes(map_id = state_lower), color=\"gray\", size=0.3, map = states_map) +\n  expand_limits(x = states_map$long, y = states_map$lat) + \n  theme_map() +\n  scale_fill_gradient(low=\"white\", high = \"navy\") +\n  labs(fill = \"Registered Nurses per \\n1000 People in 2020\")\n\n#ggplotly(nurses_map, tooltip = c(\"label\", \"label2\", \"label3\"))\n\n\n\nplotly_map <- plotly::ggplotly(nurses_map, tooltip = c(\"label\", \"label2\", \"label3\"))\n\nhtmlwidgets::saveWidget(plotly_map, \"nurses_plotly_map.html\")\n\n\n\n\n\nprint( htmltools::tags$iframe(src=\"nurses_plotly_map.html\", width=600, height=480) )\n\n\n\n\n\n\nFor this Tidy Tuesday, I looked at the geospatial relationship of number of registered nurses per 1000 people in a state. I decided to add animation via ggplotly to make the map interactive and display the state name, the exact number of nurses, and the median annual salary of nurses in that state when you hover over it. I was surprised to see that South Dakota had the most nurses per population, perhaps because it has the lowest population.\n\n\n\n\n",
    "preview": "posts/2021-10-05-tidytuesday3/blog_prev_tt3.png",
    "last_modified": "2021-11-06T13:27:59-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-09-21-tidy-tuesday-september-21/",
    "title": "Tidy Tuesday 2: The Emmys",
    "description": "Tidy Tuesday from the week of September 21 using historical Emmys data.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2021-09-21",
    "categories": [],
    "contents": "\n\n\nlibrary(tidyverse)     # for graphing and data cleaning\nlibrary(lubridate)     # for date manipulation\nlibrary(ggthemes)      # for even more plotting themes\nlibrary(sjmisc)\nlibrary(scales)\n\n\n\n\n\n# Read in the data for the week\nnominees <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-09-21/nominees.csv')\n\n\n\n\n\nnominees_edited <- nominees %>% \n  mutate(short_category = str_sub(category, 1, 21)) %>% \n  filter(short_category == \"Outstanding Directing\") %>% \n  filter(distributor == \"Netflix\" | distributor == \"Hulu\" | distributor == \"Prime Video\") %>% \n  group_by(year, distributor) %>% \n  count()\n\n\n\n\n\nnominees_edited %>% \n  ggplot(aes(x = year, y = n, color = reorder(distributor,n))) +\n  geom_line() +\n  theme_bw() +\n  labs(title = \"Emmy Nominations and Wins for Outstanding Directing in All Genres\",\n      subtitle = \"For 3 Top Streaming Services\",\n       y = \"Count\",\n       x = \"\",\n      color = \"\") +\n  scale_color_manual(values = c(\"green\", \"cornflowerblue\", \"red\")) +\n  guides(color = guide_legend(reverse=TRUE)) +\n  scale_x_continuous(breaks= pretty_breaks())\n\n\n\n\nFor this week’s Tidy Tuesday, I looked at the “Outstanding Director” Emmy nominations and wins for three top streaming services over time, Netflix, Prime Video, and Hulu. As expected, Netflix has been much more dominant than the other two, reaching a maximum of 14 nominations in 2020, but the comparitive value of this information will increase as the other services grow. I chose to color each service based on the coloring in its logo, making the legend necessary only to those who are unfamiliar with them.\n\n\n\n",
    "preview": "posts/2021-09-21-tidy-tuesday-september-21/tidy-tuesday-september-21_files/figure-html5/graph-1.png",
    "last_modified": "2021-10-05T10:53:42-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-11-06-datascifp/",
    "title": "Building Blocks of Hate: Factors that Influence Hate Crime Rates in the United States",
    "description": "I did this project with a friend in our Introduction to Data Science class. I was able to match the topic and data to I was doing at the same time in my GIS class, but this time I did all the analysis in R. The other project is available on my Writing Samples Page.",
    "author": [
      {
        "name": "Mia Rothberg",
        "url": {}
      }
    ],
    "date": "2020-05-10",
    "categories": [],
    "contents": "\nSet-Up Code\nClick each arror to expand/collapse code.\n\n\nhide\n\n#load packages\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggmap)\nlibrary(tmaptools)\nlibrary(maps)\nlibrary(openintro)\nlibrary(ggthemes)\nlibrary(ggrepel)\nlibrary(readxl)\nlibrary(cowplot)\n\n\n\n\n\nhide\n\n#load the datasets\nhate_crimes_538 <- read.csv(\"hate_crimes.csv\") #538 hate crimes dataset\nhate_crimes_recent <- read.csv(\"hate_crimes_recent.csv\") #pre-curated FBI data from 2016-2018\nstate_abbreviations <- read.csv(\"state_abbreviation.csv\") #list of state abbreviations\nstate_coordinates <- read.csv(\"state_coordinates.csv\") # list of approximate longitude/latitude coordinates of each state\ntesttab <- read.delim(\"testtab.txt\") # US Policies and Politics dataset (Michigan State University - for Question 1)\n\n\n\n\n\nhide\n\n#clean testtab to make the dataset smaller\nclean_partymeasure <-\n  testtab %>% \n  select(year, state, pid, fpvi, ideo, liberal, conservative, republican, democrat) %>% \n  filter(year==2010)\n\n#get rid of Alaska and Hawaii so mapping just shows continental US and fits better on the screen\nstate_coordinates <-\n  state_coordinates %>% \n  filter(state != \"Alaska\" & state != \"Hawaii\") \n\n\n\n\n\nhide\n\n#run joins to get the dataset we want\n\n#join FBI data and 538 data\nhate_crimes <-\n  hate_crimes_538 %>% \n  left_join(hate_crimes_recent, by=c(\"state\" = \"STATE\"))\n\n#add in state abbreviations\nhate_crimes <-\n  hate_crimes %>% \n  left_join(state_abbreviations, by=\"state\")\n\n#add in state coordinates\nhate_crimes <-\n  hate_crimes %>% \n  left_join(state_coordinates, by=\"state\")\n\n#rename the longitude column because it was accidentally named wrong\nnames(hate_crimes)[33] <- \"Longitude\"\n\n#add in political party data\nhate_crimes <-\n  hate_crimes %>% \n  left_join(clean_partymeasure, by=\"state\")\n\n\n\n\n\nhide\n\n#add in a list of lowercase state names\nhate_crimes <-\n  hate_crimes %>% \n  mutate(lower_state = tolower(state)) %>% \n  mutate(PARTY = ifelse(pid > 0, \"Democrat\", \"Republican\"))\n\n#shorten variable name\nnames(hate_crimes)[5] <- \"share_pop_HS_degree\"\n\n\n\n\n\nhide\n\n#make an edition of the dataset without the outlier of DC\nhate_crimes_no_dc <-\n  hate_crimes %>% \n  filter(state != \"District of Columbia\")\n\n\n\nResearch Questions\nFor this project, we investigated three questions, which are as follows.\n1. Do Republican states have higher rates of hate crimes than Democratic states?\nThis first question focuses on party affiliation as an explanation for the prevalence of hate crimes. We feel that it is especially important in current times, as political views are extremely polarizing. Right after Trump’s election, there was a huge spike in experience of hate crimes. This indicates that political party may influence hate crime rates, so we looked to see if Republican states have higher rates of hate crimes. We hypothesize that Republican states experience more hate crimes than Democratic states because extreme Republicans are more often associated with less open and tolerant view points, so it seems that they would be more likely to commit hate crimes. This prediction is based on our own bias as liberal Democrats, so if our hypothesis is refuted, it may make us reconsider our own prejudices against conservative states.\n2. Is income inequality associated with the rate of hate crimes in a state?\nThis second question seeks to reconfirm the conclusions of the FiveThirtyEight article that the majority of this data was associated with, which found that income inequality and hate crime rates were positively correlated. Our analysis utilized more recent data on hate crime rates than what was available at the time, 2016 to 2018 as opposed to 2010 to 2015, but we anticipated that this trend would continue nonetheless. This question is especially relevant right now given how much light has been shed on inequality by the coronavirus.\n3. Is education associated with a decreased rate of hate crimes in a state?\nMore specifically, is the share of a state’s population with a high school degree associated with a decreased level of hate crimes reported to the FBI annually from 2016 to 2018?\nThe third question investigates the relationship between high school education rates and hate crime rates. Literature and background research show that hate crimes are often founded in ignorance or fear of a group that the victim belongs to, so we hypothesized that better educated (and thus, more informed) people would be more tolerant and less likely to commit such crimes. Additionally, there is evidence that there is a negative correlation between crime rates and education, so it is likely that the same relationship will apply to this subset of crime. As many questions are being asked about our education system right now, it would be useful to know what its impacts are on society in general.\nDescription of Data\nThe foundational data in this study were compiled by FiveThirtyEight from various sources including The Kaiser Family Foundation, the US Census Bureau, the Southern Poverty Law Center, the FBI Uniform Crime Reporting (UCR) project, and the United States Election Project. The Kaiser Family Foundation data was primarily based on data collected by the US Census over a variety of years (the year of demographic data ranges from 2009 to 2015). The FBI data represents the average annual hate crimes per 100,000 people from 2010 to 2015. These data only include prosecutable hate crimes and local agencies voluntarily report their data to the FBI. The compiled data includes 11 variables for each US state, though we only used two of them. The variables we utilized from this dataset are the share of adults 25 and older with a high-school degree (2009), and the Gini index, a measurement of unequal wealth distribution and income inequality (2015). The Gini index ranges from 0 to 1, with 1 representing higher income inequality.\nAdditionally, we collected more recent data regarding hate crimes from the FBI’s UCR website. Data from 2016 to 2018 (the most recent year available) was collected and averaged over the years per 100,000 people, similarly to the original collection by FiveThirtyEight.\nAn additional dataset that we used to help answer our first research question came from data compiled by Michigan State University, from their Correlates of State Policy Project. It compiles 2,091 variables into one dataset to help with US Policy research and state policies and politics. Within this dataset contain specific sections, and we utilized variables within the “Public Opinion, Partisanship, and Political Knowledge” section. We cut out all but year, state, and pid – a measure of state political party leanings by taking the proportion of Democrats and subtracting the proportion of Republicans within every state. Therefore, the higher the number (or the more positive), the more Democratic a state leans, and the lower (or more negative) the number, the more Republican a state leans. 2010 was the most recently available year for data using the pid variable.\nFor map-based visualizations, latitude and longitude data for each state was obtained from the internet and joined with the existing dataset in order to create the proportional symbol maps.\nAnalyses\nQuestion 1: Do Republican states have higher rates of hate crimes than Democratic states?\n\n\nhide\n\n#map political party identification and hate crime rates.\n\nstates_map <- map_data(\"state\")\n\nhate_crimes %>% \n  ggplot(aes(fill = pid)) +\n  geom_map(aes(map_id = lower_state), color=\"gray\", size= .3, map = states_map) +\n  expand_limits(x = states_map$long, y = states_map$lat) + #This assures the map looks decently nice.\n  theme_map() +\n  scale_fill_gradient2(low=\"red\", mid=\"white\", high = \"blue\", midpoint=0)+\n  geom_point(aes(x=Longitude, y=Latitude, size=Avg_Crimes_per_100k, alpha = 0.5))\n\n\n\n\nThis graphic utilizes a choropleth and a proportional symbol map. The colors of the states that make up the United States (excluding Alaska and Hawaii) indicate the political party leanings of each state, and the size of the bubble within each state indicates the average rate of hate crimes. Based on this map, it appears that the largest bubbles tend to occur in blue/Democratic-leaning states. Therefore, it seems that states that tend to lean Republican generally experience fewer hate crimes than states with Democratic leanings – the opposite of our hypothesis. For a more statistical analysis, we analyze the same data on the graphs below.\n\n\nhide\n\n#model the relationship between hate crime rates and pid (with and without DC)\n\nmodelpid <- lm(Avg_Crimes_per_100k ~ pid, data=hate_crimes)\n\nmodelpid\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ pid, data = hate_crimes)\n\nCoefficients:\n(Intercept)          pid  \n      2.199       16.223  \n\nhide\n\nsummary(modelpid)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ pid, data = hate_crimes)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-5.0028 -1.2404 -0.6098  1.0984 15.2359 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   2.1988     0.4136   5.317 2.59e-06 ***\npid          16.2225     3.1415   5.164 4.40e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.897 on 49 degrees of freedom\nMultiple R-squared:  0.3524,    Adjusted R-squared:  0.3392 \nF-statistic: 26.67 on 1 and 49 DF,  p-value: 4.398e-06\n\nhide\n\nmodelpid_no_dc <- lm(Avg_Crimes_per_100k ~ pid, data=hate_crimes_no_dc)\nmodelpid_no_dc\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ pid, data = hate_crimes_no_dc)\n\nCoefficients:\n(Intercept)          pid  \n      2.072        5.710  \n\nhide\n\nsummary(modelpid_no_dc)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ pid, data = hate_crimes_no_dc)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-2.5791 -0.8935 -0.1917  0.9260  3.8072 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   2.0716     0.2087   9.926 3.23e-13 ***\npid           5.7096     1.8083   3.157  0.00275 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.46 on 48 degrees of freedom\nMultiple R-squared:  0.172, Adjusted R-squared:  0.1547 \nF-statistic: 9.969 on 1 and 48 DF,  p-value: 0.002751\n\n\n\nhide\n\n#graph hate crime rates v pid\ngraphpid <- hate_crimes %>% \n  ggplot(aes(x=pid, y=Avg_Crimes_per_100k, color=PARTY))+\n  geom_point() +\n  scale_color_manual(values=c(\"blue\",\"red\"))+\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 1: Hate Crime Rates vs. State Party Identification\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_smooth(method=\"lm\", se=FALSE, color = \"black\", size = .4)+\n  geom_abline(intercept=2.072, slope = 5.710, color = \"gray69\", size = 0.4)+\n  labs(x=\"State Party Identification (Positive = More Democrat)\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\n#graph hate crime rates v pid without DC\ngraphpidnoDC <- hate_crimes_no_dc %>% \n  ggplot(aes(x=pid, y=Avg_Crimes_per_100k, color=PARTY))+\n  geom_point() +\n  scale_color_manual(values=c(\"blue\",\"red\"))+\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 1 without DC\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_smooth(method=\"lm\", se=FALSE, color = \"gray69\", size = .5)+\n  geom_abline(intercept = 2.199, slope = 16.223, size = 0.5)+\n  labs(x=\"State Party Identification (Positive = More Democrat)\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\n#put the two graphs next to each other\nplot_grid(graphpid, graphpidnoDC, rel_widths = c(1,1), align = \"hv\")\n\n\n\n\nThese graphs utilize a variable called pid, which is an indicator of state political party affiliation. It takes the proportion of Democrats and subtracts the proportion of Republicans within every state. Therefore, the higher the number (or the more positive), the more Democratic a state leans, and the lower (or more negative) the number, the more Republican a state leans. For clearer visualization, states that have a pid greater than 0 are colored blue (to indicate more Democratic) and states that have a pid less than 0 are colored red (to indicate more Republican).\nBoth graphs show a strong positive linear relationship between Democratic-leaning states and the number of hate crimes per 100,000 people the state experiences. Thus, it seems that Democratic-leaning states experience more hate crimes, contrary to our hypothesis – that Republican-leaning states experience more hate crimes. It may be that more Republican-leaning states contain more homogeneous populations, which may reduce the likelihood of a hate crime occurring. It is also possible that Republican-leaning states have lower populations, which also could reduce the likelihood of a hate crime occurring. In order to better visualize and read the data regarding each individual state, the graph at left includes all 50 states and DC and the graph at right removes this graph removes the outlier of DC, which skewed the data. The District of Columbia experiences many more hate crimes than the states, which made the data difficult to interpret. The black line on each graph indicates the line of best fit when including DC and the gray line indicates the line of best fit without DC. The p-values for both of these models are below 0.05, indicating that there is significant and robust relationship between state party affiliation and hate crimes rates.\nQuestion 2: Is income inequality associated with the number of hate crimes in a state?\n\n\nhide\n\n#map hate crime rates and gini index\nstates_map <- map_data(\"state\")\n\nhate_crimes %>% \n  ggplot(aes(fill = gini_index)) +\n  geom_map(aes(map_id = lower_state), color=\"gray50\", size= .3, map = states_map) +\n  expand_limits(x = states_map$long, y = states_map$lat) + #This assures the map looks decently nice.\n  theme_map() +\n  scale_fill_gradient(low=\"white\", high = \"firebrick3\")+\n  geom_point(aes(x=Longitude, y=Latitude, size=Avg_Crimes_per_100k, alpha = 0.5))\n\n\n\n\nA geospatial analysis does not immediately indicate a relationship between income inequality (indicated by the choropleth) and hate crime rates (indicated by the bubbles). For example, a look at the Four Corners states indicates approximately the same rates of hate crimes but widely varying income inequality rates. Graphs to support a statistical analysis are below.\n\n\nhide\n\n#model hate crime rates v. gini index with and without DC\nmodelincome <- lm(Avg_Crimes_per_100k ~ gini_index, data=hate_crimes)\n\nmodelincome\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ gini_index, data = hate_crimes)\n\nCoefficients:\n(Intercept)   gini_index  \n     -36.68        86.59  \n\nhide\n\nsummary(modelincome)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ gini_index, data = hate_crimes)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.6923 -1.9391  0.2089  1.2331 15.6150 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  -36.676      9.536  -3.846 0.000347 ***\ngini_index    86.591     20.994   4.125 0.000143 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.101 on 49 degrees of freedom\nMultiple R-squared:  0.2577,    Adjusted R-squared:  0.2426 \nF-statistic: 17.01 on 1 and 49 DF,  p-value: 0.0001433\n\nhide\n\nmodelincome_no_dc <- lm(Avg_Crimes_per_100k ~ gini_index, data=hate_crimes_no_dc)\nmodelincome_no_dc\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ gini_index, data = hate_crimes_no_dc)\n\nCoefficients:\n(Intercept)   gini_index  \n    -0.8172       6.6016  \n\nhide\n\nsummary(modelincome_no_dc)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ gini_index, data = hate_crimes_no_dc)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-1.8762 -1.2863 -0.1254  0.3631  4.2310 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)\n(Intercept)  -0.8172     5.8014  -0.141    0.889\ngini_index    6.6016    12.8195   0.515    0.609\n\nResidual standard error: 1.6 on 48 degrees of freedom\nMultiple R-squared:  0.005494,  Adjusted R-squared:  -0.01522 \nF-statistic: 0.2652 on 1 and 48 DF,  p-value: 0.6089\n\n\n\nhide\n\n#graph hate crimes v. gini index\ngraphincome <- hate_crimes %>% \n  ggplot(aes(x=gini_index, y=Avg_Crimes_per_100k))+\n  geom_point(col=\"red\") +\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 2: Hate Crime Rates vs. Income Inequality\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_smooth(method=\"lm\", se=FALSE, color = \"black\", size = .4)+\n  geom_abline(intercept=-0.8172, slope = 6.6016, color = \"blue\", size = 0.4)+\n  labs(x=\"Gini Index\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\n#graph hate crimes v. gini index without DC\ngraphincomenoDC <- hate_crimes_no_dc %>% \n  ggplot(aes(x=gini_index, y=Avg_Crimes_per_100k))+\n  geom_point(col=\"red\") +\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 2 without DC\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_smooth(method=\"lm\", se=FALSE, color = \"blue\", size = .5)+\n  geom_abline(intercept = -36.676, slope = 86.591, size = 0.5)+\n  labs(x=\"Gini Index\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\n#put the graphs next to each other\nplot_grid(graphincome, graphincomenoDC, rel_widths = c(1,1), align = \"hv\")\n\n\n\n\nThe graph at left indicates a positive relationship between hate crime rates and income inequality, as measured by the Gini index. The black line of best fit shown has a slope of 86.59, indicating that for each one point higher the Gini index of a state is, the model predicts 86.59 more hate crimes per 100,000 people. The p-value for this slope is very low, at 0.00143, indicating that, were our data to include the entire population of hate crime statistics, the same trend would be evident. The state with the highest income inequality is Washington, D.C., and it had a hate crime rate nearly four times higher than the next highest state. The same analysis, without this outlier, is conducted at right with the analysis below.\nThe graph at right also indicates a positive relationship between hate crime rates and income inequality. The blue line of best fit shown has a slope of 6.6016, indicating that for each one point higher the Gini index of a state is, the model predicts 6.6016 more hate crimes per 100,000 people. The original line of best fit is shown for comparison: this relationship is significantly less steep than the one shown in the previous model, but the slope is positive nonetheless. The p-value for this model is 0.609, which is very large and indicates that this relationship would not be repeated were this sample to be expanded.\nBecause the p-value is not repeatable after removing the outlier of DC, this analysis indicates that there is not a consistent relationship between income inequality and hate crimes. This is counter to the conclusions of the FiveThirtyEight article that was associated with the original dataset, though they analyzed older hate crime data.\nQuestion 3: Is education associated with a decreased level of hate crimes in a state?\n\n\nhide\n\n#map hate crime and share of population with high school degree\nstates_map <- map_data(\"state\")\n\nhate_crimes %>% \n  ggplot(aes(fill = share_pop_HS_degree)) +\n  geom_map(aes(map_id = lower_state), color=\"seagreen4\", size=0.3, map = states_map) +\n  expand_limits(x = states_map$long, y = states_map$lat) + #This assures the map looks decently nice.\n  theme_map() +\n  scale_fill_gradient(low=\"white\", high = \"seagreen3\")+\n  geom_point(aes(x=Longitude, y=Latitude, size=Avg_Crimes_per_100k, alpha = 0.7))\n\n\n\n\nA geospatial analysis does not immediately indicate a relationship between high school degrees and hate crime rates. For example, look again at the Four Corners states, which have approximately the same rates of hate crimes but widely varying high school education rates. Graphs to support a statistical analysis are below.\n\n\nhide\n\n#model the relationship\nmodelHS <- lm(Avg_Crimes_per_100k ~ share_pop_HS_degree, data=hate_crimes)\n\nmodelHS\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ share_pop_HS_degree, data = hate_crimes)\n\nCoefficients:\n        (Intercept)  share_pop_HS_degree  \n             -4.164                7.801  \n\nhide\n\nsummary(modelHS)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ share_pop_HS_degree, data = hate_crimes)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-2.5764 -1.5732 -0.8086  0.3495 22.3748 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)\n(Intercept)           -4.164     12.958  -0.321    0.749\nshare_pop_HS_degree    7.801     14.898   0.524    0.603\n\nResidual standard error: 3.59 on 49 degrees of freedom\nMultiple R-squared:  0.005565,  Adjusted R-squared:  -0.01473 \nF-statistic: 0.2742 on 1 and 49 DF,  p-value: 0.6029\n\nhide\n\nmodelHS_no_dc <- lm(Avg_Crimes_per_100k ~ share_pop_HS_degree, data=hate_crimes_no_dc)\nmodelHS_no_dc\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ share_pop_HS_degree, data = hate_crimes_no_dc)\n\nCoefficients:\n        (Intercept)  share_pop_HS_degree  \n             -3.969                7.061  \n\nhide\n\nsummary(modelHS)\n\n\n\nCall:\nlm(formula = Avg_Crimes_per_100k ~ share_pop_HS_degree, data = hate_crimes)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-2.5764 -1.5732 -0.8086  0.3495 22.3748 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(>|t|)\n(Intercept)           -4.164     12.958  -0.321    0.749\nshare_pop_HS_degree    7.801     14.898   0.524    0.603\n\nResidual standard error: 3.59 on 49 degrees of freedom\nMultiple R-squared:  0.005565,  Adjusted R-squared:  -0.01473 \nF-statistic: 0.2742 on 1 and 49 DF,  p-value: 0.6029\n\n\n\nhide\n\n#graph hate crimes v. HS\ngraphHS <- hate_crimes %>% \n  ggplot(aes(x=share_pop_HS_degree, y=Avg_Crimes_per_100k))+\n  geom_point(col=\"red\") +\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 3: Hate Crime Rates vs. High School Education\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_smooth(method=\"lm\", se=FALSE, color = \"black\", size = .5)+\n  geom_abline(intercept=-3.969, slope=7.061, color=\"blue\")+\n  labs(x=\"Share Pop with a High School Degree\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\n#graph hate crimes v. HS without DC\ngraphHSnoDC <- hate_crimes_no_dc %>% \n  ggplot(aes(x=share_pop_HS_degree, y=Avg_Crimes_per_100k))+\n  geom_point(col=\"red\") +\n  geom_text_repel(size=2.5, aes(label= state_abbr.x), col=\"grey\")+\n  ggtitle(\"Figure 3 without DC\")+\n  theme_minimal()+\n  theme(axis.title.x = element_text(size = 8),\n        axis.title.y = element_text(size = 8),\n        plot.title = element_text(size = 10)) +\n  geom_abline(intercept=-4.164, slope = 7.801)+\n  geom_smooth(method=\"lm\", se=FALSE, color = \"blue\", size = .5)+\n  labs(x=\"Share Pop with a High School Degree\", y=\"Average Hate Crimes per Year per 100,000 People\")\n\nplot_grid(graphHS, graphHSnoDC, rel_widths = c(2,2), align = \"hv\")\n\n\n\n\nThis graph indicates a positive relationship between hate crime rates and high school education rates, which is counter to our hypothesis that states with higher education rates would have more accepting residents. The line of best fit (black) shown has a slope of 7.801, indicating that for each 100 percent increase in the share of a state population with a high school degree, the model predicts 7.801 more hate crimes per 100,000 people. The p-value for this slope is high, at 0.603, indicates that this relationship would not be repeated were this sample to be expanded.\nAfter removing the outlier of DC from the dataset, the slope of the model (blue) is only slightly lower, at 7.061. However, the p-value for the model is still fairly high, at 0.289, once again indicating that this relationship would not be repeated were this sample to be expanded.\nConclusions\nFor question one, we found that more Democratic states had higher rates of hate crimes than Republican states. This is contrary to our hypothesis and what our biases led us to believe, and could be due to several factors, which were enumerated in the analyses.\nFor question two, it initially appeared that there was a positive relationship between income inequality and hate crime rates. However, after removing the outlier of Washington, D.C., this relationship no longer held up under a statistical analysis. This is contrary to the conclusions of the FiveThirtyEight article that this analysis is based on.\nQuestion three revealed no relationship between share of a population with a high school degree and hate crime rates, contrary to our hypothesis that better-educated states would be more tolerant. This is somewhat disheartening, but may be due to confounding factors that we were not able to consider.\nGoing forward, it would be interesting to increase the sample size by having a data point for each state for each year that hate crime data is available (1995 to 2018). This would enable us to see the changes in a state overtime and ensure that outliers (such as DC) have less of an effect on the model. It would also be interesting to look at other factors that may influence hate crime rates, such as an urban-rural divide, strength of public school systems, or racial diversity.\nAcknowledgments\nThanks for all your help!!\nPartner: Jessica Brown\nCoach: Marie Crane\nProfessor Shilad Sen\nData acquired from:\nFiveThirtyEight\nMichigan State University\nFBI Uniform Crime Reporting Program\n\n\n\n",
    "preview": "posts/2021-11-06-datascifp/datascifp_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-11-06T13:20:47-05:00",
    "input_file": {}
  }
]
